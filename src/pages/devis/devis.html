<ion-header>
  <ion-navbar text-center hideBackButton="true">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <img src="./assets/imgs/logo.svg" class="img-logo" alt="Madera"/>
    <ion-buttons end>
      <button ion-button icon-only class="contact-icon" (click)="presentPopover($event)">
        <ion-icon name="contact"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <ion-card>

    <ion-card-header>
      <h2>Devis</h2>
    </ion-card-header>

    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col col-12 col-sm-4 text-center text-sm-left>
            <p>Réf. projet : {{refProjet}}</p>
            <p>Date projet : {{projet.dateProjet}}</p>
            <p>{{projet.adresseProjet}}</p>
          </ion-col>
          <ion-col col-0 col-sm-4></ion-col>
          <ion-col col-12 col-sm-4 text-center text-sm-end>
            <p>Référence client : 1555</p>
            <p>Mr. Kévin BUZIT</p>
            <p>28 rue de Douarnenez</p>
            <p>29100 Carhaix</p>
          </ion-col>
        </ion-row>
        <ion-row justify-content-center>
          <ion-col col-12 text-center>
            <p>{{projet.nomProjet}}</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-12 text-center>
            <strong>TOTAL HT : 110 000€</strong>
            <p>TVA COM {{projet.margeCommercialeProjet}}% : 2200€</p>
            <p>TVA ENT {{projet.margeEntrepriseProjet}}% : 5500€</p>
            <strong>TOTAL TTC : 117 700€</strong>
            <br>
          </ion-col>
        </ion-row>
        <ion-row class="border">
          <ion-col col-12 *ngIf="null != projet.produits && projet.produits.length > 0">
            <ion-list>

              <button ion-item *ngFor="let produit of projet.produits" (click)="presentDisplayProductModal(produit)">
                {{ produit.modele.referenceModele }} {{ produit.modele.designationModele }}
              </button>

            </ion-list>
          </ion-col>
        </ion-row>
        <ion-row class="border">
          <ion-col col-12 *ngIf="null != projet.produits && projet.produits.length > 0">
            <ion-list>
              <div *ngFor="let produit of projet.produits">
                <button ion-item *ngFor="let module of produit.modele.modules" (click)="presentDisplayModuleModal(module)">
                  {{ module.designationModule }}
                </button>
              </div>
            </ion-list>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-12>
            <button ion-button color="green-madera" float-right (click)="sendDevis()">VALIDER</button>
            <button ion-button color="green-madera" float-right (click)="cancel()">ANNULER</button>
          </ion-col>
        </ion-row>
      </ion-grid>

    </ion-card-content>

  </ion-card>

</ion-content>
